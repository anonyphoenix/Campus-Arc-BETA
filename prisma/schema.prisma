generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("POSTGRES_PRISMA_URL") // uses connection pooling
  directUrl = env("POSTGRES_URL_NON_POOLING") // uses a direct connection
}

model Student {
  id                   Int                 @id @default(autoincrement())
  eduUsername          String
  email                String?
  ethAddress           String?
  OCaccessToken        String? // access_token from OC ID verification response
  OCIdtoken            String? // id_token from OC ID verification response
  registeredArcModules ArcModule[] // A student can register to many arcModules
  registrationStakes   RegistrationStake[] // A student can have many registrationStakes
}

model ArcDesigner {
  id         Int         @id @default(autoincrement())
  arcModules ArcModule[] // An arcDesigner can have many arcModules
  fullName       String
}

model ArcModule {
  id                 Int          @id @default(autoincrement())
  category           String
  level              String
  title              String
  imageSrc           String
  description        String
  lessons            String
  time               String
  projects           String
  studentsRegistered Student[] // The students who registered to this arcModule
  arcDesigner        ArcDesigner? @relation(fields: [arcDesignerId], references: [id]) // The arcDesigner object who created this one arcModule
  arcDesignerId      Int? // Arc designer id
}

model RegistrationStake {
  id                    Int     @id @default(autoincrement())
  hash                  String
  amount                Int
  student               Student @relation(fields: [studentId], references: [id]) // The student object who approved this one registrationStake
  studentId             Int // the id of the student who registered this one registrationStake
  registeredArcModuleId Int // the id of the arcModule that this registrationStake is registered to
}

enum Gender {
  Male
  Female
}

// Notes: 
// 1- Ekstra Student detaylarÄ± daha sonra eklenecek.
// 2- Arc Designer eklenecek
